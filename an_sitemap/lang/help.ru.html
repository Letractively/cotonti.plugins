<p style="text-align:justify"><strong>Основные функции плагина:</strong>
<ul>
<li>генерирование HTML, XML и TXT карты сайта</li>
<li>автоматическое добавление ссылки на индекс XML-карты в файл «robots.txt» при наличии прав на запись</li>
<li>включение в XML и TXT карты страниц, образованных паджинацией</li>
<li>включение/исключение тех или иных разделов сайта и форума в карту (настраивается отдельно для каждого типа карты)   </li>
<li>использование дополнений (интеграторов) для включения в карту страниц, генерируемых, например, другими плагинами (контакты, магазин, гостевая книга и т.п.). О создании интеграторов читайте ниже. </li>
<li>Добавление дополнительных ссылок в карту сайта через панель администратора. </li>
<li>Вывод HTML-карты сайта настраивается шаблоном</li>
<li>При формировании карты учитываются права гостей на просмотр разделов сайта </li>
</ul>
</p>
<p>Данный инструмент позволяет генерировать 3 типа карты Вашего сайта на Cotonti.</p>
<p><strong>HTML карта сайта:</strong><br />
Находится по адресу: <strong>http://ваш_домен/plug.php?e=an_sitemap</strong>. Выводит древовидный список основных разделов Вашего сайта. </p>
<p style="text-align:justify"><strong>XML карта сайта:</strong><br />
Индекс карты находится по адресу: <strong>http://ваш_домен/plug.php?r=an_sitemap&amp;out=xml_index</strong>. Выводит перечень частей XML-карты сайта. <br />
Сама карта доступна по адресу: <strong>http://ваш_домен/plug.php?r=an_sitemap&amp;out=xml</strong>. При количестве URL, превышающем установленное значение, карта сайта разбивается на части, которые перечисляются в индексе карты. Карта сайта в формате xml выводится согласно протокола <a href="http://www.sitemaps.org">http://www.sitemaps.org</a>. <br />
С помощью этой карты сайта веб-мастера могут сообщать   поисковым системам о веб-страницах, которые доступны для сканирования. Она особенно важна для правильного индексирования Вашего сайта поисковыми системами в случае, когда: </p>
<ul style="text-align:justify">
  <li>На вашем сайте имеется динамическое содержание. </li>
  <li>Ваш сайт содержит страницы, которые поисковый робот  может не обнаружить при сканировании, например страницы с мультимедийным   AJAX-содержанием или изображениями, страницы, находящиеся в &laquo;большом количестве кликов&raquo; от главной страницы. </li>
  <li>Ваш сайт создан недавно, и на него указывает мало ссылок. (Поисковые   роботы  сканирует Интернет, переходя по ссылкам с одной   страницы на другую. Если на ваш сайт указывает мало ссылок, роботу будет   сложно его найти.)</li>
  <li>Ваш сайт содержит большой архив страниц с контентом, которые слабо   или совсем не связаны друг с другом.</li>
</ul>
<p style="text-align:justify">Эта информация,  позволяет сканерам, поддерживающим протокол Sitemap, найти все URL   в файле Sitemap и собрать информацию об этих URL с помощью связанных метаданных.   Использование <a href="http://www.sitemaps.org/ru/protocol.php">протокола</a> Sitemap не является гарантией того, что веб-страницы будут проиндексированы поисковыми системами, это всего лишь дополнительная   подсказка для сканеров, которые смогут выполнить более тщательное сканирование Вашего   сайта.</p>
<p> Его поддерживают Google, Yandex, Yahoo!,  Bing (Майкрософт).</p>
<p style="text-align:justify"><strong>TXT карта сайта:</strong><br />
Находится по адресу: <strong>http://ваш_домен/plug.php?r=an_sitemap&amp;out=txt</strong>. Выводит карту Вашего сайта в формате text/plain в виде перечня страниц, по 1 URL на строку.</p>
<p>&nbsp;</p>
<p style="text-align:justify"><strong>Настройка</strong></p>
<p>Некоторые поисковые роботы, например Yandex, требуют, чтобы карта располагалась в корне сайта, иначе можно получить ошибку &laquo;Некорректный URL (не соответствует местоположению файла Sitemap&raquo;. Подробнее <a href="http://www.sitemaps.org/ru/protocol.php#location">можно прочитать тут</a>.</p>
<p>Для того, чтобы сообщить поисковым роботам о карте сайта, в файл <strong>robots.txt</strong> нужно добавить:</p>
<p class="code">
Sitemap: <span style="text-align:justify">http://portal30.ru1/plug.php?r=an_sitemap&amp;out=xml_index</span><br />
Sitemap: <span style="text-align:justify">http://portal30.ru1/plug.php?r=an_sitemap&amp;out=xml</span><br />
</p>

<p>&nbsp;</p>
<p style="text-align:justify">Настройка плагина позволяет указать количество URL-адресов, входящих в XMLи TXT карту сайта. Google разрешает не более 50,000 адресов URL на XML   файл. Включить или исключить из карты  те или иные разделы сайта (страницы, форумы, пользователи). </p>
<p style="text-align:justify">Обратите внимание на настройку <strong>&laquo;Поле с датой изменеия страницы&raquo;</strong>.<br />
Это поле из таблицы страниц в БД. Оно используется для добавления метаданных о дате последнего изменения страницы. По умолчанию данные берутся из <strong>«page_date»</strong>. Но рекомендуется   использовать дополнительное поле, в которое бы производилась запись   временной метки автоматически при каждом сохранении страницы. Если   включено авто заполнение этого поля, оно будет автоматически заполняться   средствами этого плагина при каждом изменении страницы. Если у Вас сайт уже существует, то после добавления этого экстраполя, желательно перенести в него данные из поля <strong>«page_date» </strong>(Сделать это можно, например таким SQL-запросом &laquo;<strong>UPDATE sed_pages SET имя_нужного_экстраполя=page_date</strong>&raquo;) , в дальнейшем дата модификации должна обновляться на дату внесения исправления в страницу. </p>
<p style="text-align:justify">Также можно указать, насколько часто примерно изменяются страницы. Это   значение представляет общую информацию для поисковых роботов и может не   точно указазывать, на сколько часто они обходят страницу. Это значение <strong>всегда</strong> нужно использовать описывая документы которые изменяются при каждом   обращении. Это значение <strong>никогда</strong> не нужно использовать   для описания архивных URL'ов.</p>
<p style="text-align:justify">И можно указать, приоритет этого URL разделов  Вашего сайта, относительно других URL'ов на   Вашем сайте. Правильный диапазон значений от 0.0 до 1. Это значение   никак не скажется на страницах Вашего сайта относительно других страниц,   оно только позволяет поисковому роботу узнать, какие из Ваших страниц   Вы считаете наиболее важными и позволяет позволяет организовать обход   страниц в удобном для Вас порядке.<br />
  <br />
По умолчанию значение для каждой страницы 0.5.</p>
<p style="text-align:justify">&nbsp;</p>
<p><strong>Настройка структуры</strong><br />
  Здесь Вы можете включить или исключить те или иные категории Вашего сайта и разделы форума в карту.</p>
<p>&nbsp;</p>
<p style="text-align:justify"><strong>Настройка дополнений </strong><br />
Здесь Вы можете включить или исключить те или иные дополнения (интеграторы) в карту сайта.<br />
Некоторые готовые дополнения Вы можете скачать на странице плагина. </p>
<p style="text-align:justify">&nbsp;</p>
<p style="text-align:justify"><strong>Создание дополнений </strong>(интеграторов)<br />
  <em>Информация для разработчиков. </em><br />
  В корне плагина содержится тестовый интегратор. Создать интегратор для любого плагина можно на основе его.<br />
  Имя файла интегратора состоит из &laquo;&lt;код&gt;.an_sitemap.integrator.php&raquo;</p>
<p style="text-align:justify">Файл интегратора может находиться в корне плагина карты сайта или корне самого плагина. После добавления этого нет необходимости переустанавливать плагины. Он будет автоматически подхвачен при формировании карты.</p>
<p style="text-align:justify">Файл  интегратора должен содержать функцию с именем &laquo;&lt;код&gt;._sitemap($show_num = 0)&raquo;. Код должен совпадать кодом в имени файла. Параметр указывает на то, надо ли выводить количество элементов в HTML карту.<br />
Эта функция должна возвращать массив, данны которого и используются для включения в карту сайта.</p>
<p>Обязательные данные:</p>
<p class="code">//  Название интегратора.<br />
$out[&lt;код&gt;]['_name_'] = $L['plu']['test_name'];			  	<br />
//  Описание интегратора для панели администратора <br />
  $out[&lt;код&gt;]['_desc_'] = 'test Site Map Integrator for some plugin'; </p>
<p>&lt;Код&gt; должен совпадать кодом в имени файла. </p>
<p>И как минимум одна конструкция вида:</p>
<p class="code">// Массив элементов в корне<br />
  <br />
  // Название для HTML-карты <br />
  $out['contactus']['ROOT']['1']['title'] = $L['sitemap']['title1'];<br />
  // URL включаемой в карту страницы <br />
  $out['contactus']['ROOT']['1']['link'] =  $cfg['mainurl'].'/'.sed_url('plug', 'e=contactus');<br />
  // Количество URL во всем подключаемом списке ссылок (обязательно) <br />
  $out['contactus']['ROOT'][_count_] =  1;<br />
  // Приоретет страницы для XML-карты (необязательно)<br />
  $out['test']['ROOT']['1']['priority'] = 0.5 ;					<br />
  // Частота изменения страницы для XML-карты (необязательно)<br />
  $out['test']['ROOT']['1']['changefreq'] = 'monthly' ;			<br />
  // Дата последней модификации страницы для XML-карты (необязательно) <br />
  $out['test']['ROOT']['1']['lastmod'] = date('Y-m-d\TH:i:s+00:00');<br />
  // Включаем количество элементов, если нужно<br />
  // (отобразится в скобках рядом с ссылкой в HTML карте) <br />
  //if ($show_num == 1) $out['test']['ROOT']['1']['count'] = &quot;1&quot;;</p>
<p>Если необязательные элементы не указаны, то будут использованы значения по-умолчанию:<br />
Приоретет = 0.5<br />
Частота изменения = 'monthly'<br />
Дата = сегодняшняя. </p>
